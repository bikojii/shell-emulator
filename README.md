# (ВАРИАНТ 14) Отчет по реализации эмулятора командной оболочки
## Этап 1 REPL

### Реализованная функциональность

1. **Графический интерфейс:**  
   Создано приложение с графическим интерфейсом на базе `Tkinter`.

2. **Приглашение ко вводу:**  
   Реализовано в формате `username@hostname:directory$`.

3. **Парсер с поддержкой кавычек:**  
   Корректно обрабатывает аргументы, заключенные в кавычки.

4. **Обработка ошибок:**  
   Вывод сообщений о неизвестных командах и ошибках парсинга.

5. **Базовые команды:**  
   Реализованы команды `ls`, `cd` (заглушки) и `exit`.

---

### Примеры работы

#### Приглашение командной строки
```
admin@localhost:/$
```
#### Обработка аргументов с кавычками
```
admin@localhost:/$ ls "AAA BBB CCC"
Команда ls
Аргументы: AAA BBB CCC
```
#### Обработка ошибок
```
admin@localhost:/$ fdsafdsa
Команда 'foo' не найдена
```
#### Выход из эмулятора
```
admin@localhost:/$ exit
```
## Этап 2 Конфигурация

### Реализованная функциональность

1. **Параметры командной строки:**
   - `--vfs=путь` — путь к файлу виртуальной файловой системы (VFS);
   - `--script=путь` — путь к стартовому скрипту.

2. **Обработка стартового скрипта:**
   - Скрипт выполняется построчно;
   - Комментарии и пустые строки игнорируются;
   - При выполнении на экран выводится как ввод команды, так и результат её выполнения.

3. **Обработка ошибок:**
   - При ошибке во время выполнения стартового скрипта выводится сообщение об ошибке, но выполнение продолжается.

---

### Пример запуска

```
python shell_emulator.py --script=startup.txt --vfs=vfs.json
```
### Пример содержимого startup.txt

```
cd -h
cd
ls -h
ls
```
### Вывод выполнения скрипта

```
Попробуйте ввести команды с аргументами в кавычках!
[DEBUG] VFS Path: C:\Users\admin\PycharmProjects\pythonProject3\Lib
[DEBUG] Startup Script: startup.txt
admin@localhost:Lib$ cd -h
cd вызван с аргументами: ['-h']

admin@localhost:Lib$ cd
cd вызван с аргументами: []

admin@localhost:Lib$ ls -h
ls вызван с аргументами: ['-h']
file1.txt  file2.txt  directory/

admin@localhost:Lib$ ls
ls вызван с аргументами: []
file1.txt  file2.txt  directory/

admin@localhost:Lib$ foo
Команда 'foo' не найдена

```
## Этап 3 VFS

### Реализованная функциональность

1. **Создание VFS:**
   - При указании параметра `--vfs` виртуальная файловая система загружается из JSON-файла;
   - Если путь не указан, создается VFS по умолчанию в памяти.

2. **Формат данных:**
   - Для хранения файлов используется структура JSON;
   - Для содержимого файлов применяется кодировка Base64.

3. **Обработка ошибок:**
   - Вывод сообщения при отсутствии файла VFS;
   - Проверка корректности формата JSON.

---

### Пример структуры VFS по умолчанию
```
{
    "type": "dir",
    "name": "/",
    "children": {
        "file1.txt": {
            "type": "file",
            "name": "file1.txt",
            "content": "SGVsbG8gd29ybGQh"
        },
        "docs": {
            "type": "dir",
            "name": "docs",
            "children": {
                "readme.txt": {
                    "type": "file",
                    "name": "readme.txt",
                    "content": "VGhpcyBpcyBhIHJlYWRtZSBmaWxlLg=="
                },
                "images": {
                    "type": "dir",
                    "name": "images",
                    "children": {}
                }
            }
        },
        "projects": {
            "type": "dir",
            "name": "projects",
            "children": {
                "project1": {
                    "type": "dir",
                    "name": "project1",
                    "children": {
                        "main.py": {
                            "type": "file",
                            "name": "main.py",
                            "content": "cHJpbnQoIkhlbGxvIFByb2plY3QhIik="
                        }
                    }
                }
            }
        }
    }
}
```
### Команда запуска
```
python shell_emulator --vfs=vfs.json
```
### Вывод программы

```
[DEBUG] VFS Path: vfs.json
[DEBUG] Startup Script: None

admin@localhost:/$ ls
file1.txt  docs  projects
admin@localhost:/$ cd docs
admin@localhost:/docs$ ls
readme.txt  images
admin@localhost:/docs$ cd images
admin@localhost:/docs/images$ ls
admin@localhost:/docs/images$ cd /
admin@localhost:/$ cd missing
cd: путь 'missing' не найден
admin@localhost:/$ foo
Команда 'foo' не найдена
admin@localhost:/$ exit
```

## Этап 4 Основные команды

### Реализованная функциональность

1. **Команда ls** — вывод содержимого текущей директории.

2. **Команда cd** — переход в другую директорию (поддержка относительных и абсолютных путей, . и ..).

3. **Команда wc** — подсчет количества строк, слов и символов в файле.

4. **Команда uniq** — вывод уникальных строк файла (аналог команды UNIX uniq).
---
### Примеры работы

**Команда wc**
```
admin@localhost:/$ wc file1.txt
1 2 12 file1.txt
```

**Команда uniq**
```
admin@localhost:/$ uniq readme.txt
This is a readme file.
```

## Этап 5 Дополнительные команды

### Реализованная функциональность

1. **Команда mv** — перемещение или переименование файлов и папок в пределах VFS.

    -Особенности:

    -Проверка существования исходного пути.

    -Проверка существования целевой директории.

    -Возможность переименования.

    -Запрещена перезапись существующих элементов.

    -Все изменения выполняются только в памяти.

---
### Пример работы
```
admin@localhost:/$ mv file1.txt docs/readme.txt
Перемещено 'file1.txt' -> 'docs/readme.txt'
admin@localhost:/$ ls docs
readme.txt  file1.txt
admin@localhost:/$ mv несуществующий_файл docs/readme.txt
mv: исходный путь "несуществующий_файл" не найден
```

## Итог

Эмулятор реализует функциональность командной оболочки UNIX-подобной системы с графическим интерфейсом.
Приложение поддерживает:

- интерактивный ввод команд;

- выполнение стартовых скриптов;

- работу с виртуальной файловой системой в памяти;

- базовые и расширенные команды (ls, cd, wc, uniq, mv, exit).

Проект завершен в соответствии с требованиями всех пяти этапов задания.